<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Vzdálenost k VŠE z aktuální polohy je</title>
</head>
<body>
    <h1>Vzdušná vzdálenost k VŠE je</h1>

    <p id="status">Zjišťuji polohu…</p>
    <p id="vysledek"></p>

    <script>
        function haversine(lat1, lon1, lat2, lon2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;

            const a = Math.sin(dLat / 2) ** 2 +
                      Math.cos(lat1 * Math.PI / 180) *
                      Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon / 2) ** 2;

            return R * 2 * Math.asin(Math.sqrt(a));
        }

        const vse = { lat: 50.0843, lon: 14.4413 };

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function(pos) {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;

                    document.getElementById("status").textContent =
                        "Vaše poloha: " + lat.toFixed(5) + ", " + lon.toFixed(5);

                    const vzdalenost = haversine(lat, lon, vse.lat, vse.lon);

                    document.getElementById("vysledek").textContent =
                        "Vzdušná vzdálenost do VŠE je: " + vzdalenost.toFixed(1) + " km";
                },
                function(err) {
                    document.getElementById("status").textContent =
                        "Nepodařilo se získat polohu: " + err.message;
                }
            );
        } else {
            document.getElementById("status").textContent =
                "Geolokace není v tomto prohlížeči podporována.";
        }
    </script>
</body>
</html>